{% extends "base.html" %}

{% block content%}

<div class="body">
    <div class="container has-text-justified">
        <!--
        <h1 class="title is-1">
            Hola, {{ name }}!
        </h1>
        <br>
        -->
        <div class="container has-text-centered">
            <h3 class="text-muted">
                <i>{{ quote }}.</i>
                <br>
                <p align="right"><b>{{ author }}.</b></p>
            </h2>
        </div>

        <br>

        <h2>Estadísticas.</h2>
        <table class="table is-fullwidth is-stripped">
            <tbody>
                <tr class="has-background-success-light">
                    <th>Libros registrados</th>
                    <th>Libros leídos</th>
                    <th>Libros sin leer</th>
                    <th>Libros prestados</th>
                </tr>
                <tr>
                    <td>{{ books_total }}</td>
                    <td>{{ books_read }}</td>
                    <td>{{ books_unread }}</td>
                    <td>{{ books_shared }}</td>
                </tr>
            </tbody>
        </table>

        <br>

        <h2>Análisis de Datos.</h2>
        <div class="container">
            <div class="row">
                <div class="col-sm">

                    <h3>Cantidad de libros por país de autor</h3>
                    <table class="table is-halfwidth is-stripped">
                        <tbody>
                            <tr class="has-background-success-light">
                                <th>País</th>
                                <th>Cantidad</th>
                            </tr>
                            {% for country, count in books_by_country|sort(attribute='count_1') %}
                            <tr>
                                <td><a href="{{ url_for('main.show_country', author_country = country) }}">{{ country }}</a></td>
                                <td>{{ count }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                </div>
            </div>


            <div class="row">
                <div class="col-sm">
                    <h3>Autores con más libros</h3>
                    <table class="table is-halfwidth is-stripped">
                        <tbody>
                            <tr class="has-background-success-light">
                                <th>Autor</th>
                                <th>Cantidad</th>
                            </tr>
                            {% for count, author_id, author in authors_with_most_books|sort(attribute='count_1') %}
                            <tr>
                                <td><a href="{{ url_for('main.show_author', author_id = author_id) }}">{{ author }}</a></td>
                                <td>{{ count }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <div class="col-sm">
                    <h3>Editoriales con más libros</h3>
                    <table class="table is-halfwidth is-stripped">
                        <tbody>
                            <tr class="has-background-success-light">
                                <th>Editorial</th>
                                <th>Cantidad</th>
                            </tr>
                            {% for count, editorial_id, editorial in editorials_with_most_books|sort(attribute='count_1') %}
                            <tr>
                                <td><a href="{{ url_for('main.show_editorial', editorial_id = editorial_id) }}">{{ editorial }}</a></td>
                                <td>{{ count }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
